language: node_js
services:
  - mongodb
cache:
  directories:
  - node_modules
git:
  depth: 5
before_script:
  - npm prune
script:
  - npm run lint
  - npm run test-coverage
  - npm run build
after_script:
  - npm run report-coverage
deploy:
  - provider: heroku
    api_key:
      secure: LZUT2N961Yb7Wjp3jkrPOtBT803z8O6KVenrdFeFwt7+GD4vVgywR0wrBYw6n1yLzzkuJOdvjZe2dmEj6DNH8TkxOi/DemaSxDz8XzbYWdoB8ietVikzAoDfrcXuyrnz9qn5gzLH5RnPJ/Z5zzgnONimgDuUlqb2avTPyrUMZ2DE6opBEMQqfIAjKsAlF1UXpWX255BIdwnf2FEtHp8cYd2BNga9nuXJ6AfCVapfiD9H06cDxOR6tub4jOTdd9k6mJ72ShdHz/3tSLESSnFqo+m0wxnVw7SpMEj4CBw5V2mS/k3K9DIiPO2bQcTxUHYnG/OH7J97aS6eZecbM7rqxgyggQj9TcvwnO6PGnRxmy1XE5pOVcjVzUO1weqJtLXlomzi31JQaiUsKu3XqqMMZ5705ja0r9mB2Qr+OGgiCZbbjERdtkwQCHBAgiGe2WJN/bvl25r9WvO9lPC43W1sGIurlnhGiawU+m0WcfE76zsYjyXbHyHvjbVLeIH9V94FYU/fNEY3f0J/T403NIthQKyFekHCrGu7sFnAFwbeQTdl9eKPD6dsJiU09AQEuCzIRK4QiSEExnft5TDFWHg52ojT0+vQOd6sbxiBdMLERvR7ZQirY0FBSXxRBNWaUVSJuzxiz6/g15CmMWvcvKQ4zwZfmV0wc1HtruiYUrTYJro=
    app: garage-it-smart-house-api
    on:
      repo: garage-it/SmartHouse-backend
  - provider: heroku
    api_key:
      secure: LZUT2N961Yb7Wjp3jkrPOtBT803z8O6KVenrdFeFwt7+GD4vVgywR0wrBYw6n1yLzzkuJOdvjZe2dmEj6DNH8TkxOi/DemaSxDz8XzbYWdoB8ietVikzAoDfrcXuyrnz9qn5gzLH5RnPJ/Z5zzgnONimgDuUlqb2avTPyrUMZ2DE6opBEMQqfIAjKsAlF1UXpWX255BIdwnf2FEtHp8cYd2BNga9nuXJ6AfCVapfiD9H06cDxOR6tub4jOTdd9k6mJ72ShdHz/3tSLESSnFqo+m0wxnVw7SpMEj4CBw5V2mS/k3K9DIiPO2bQcTxUHYnG/OH7J97aS6eZecbM7rqxgyggQj9TcvwnO6PGnRxmy1XE5pOVcjVzUO1weqJtLXlomzi31JQaiUsKu3XqqMMZ5705ja0r9mB2Qr+OGgiCZbbjERdtkwQCHBAgiGe2WJN/bvl25r9WvO9lPC43W1sGIurlnhGiawU+m0WcfE76zsYjyXbHyHvjbVLeIH9V94FYU/fNEY3f0J/T403NIthQKyFekHCrGu7sFnAFwbeQTdl9eKPD6dsJiU09AQEuCzIRK4QiSEExnft5TDFWHg52ojT0+vQOd6sbxiBdMLERvR7ZQirY0FBSXxRBNWaUVSJuzxiz6/g15CmMWvcvKQ4zwZfmV0wc1HtruiYUrTYJro=
    app: garage-it-smart-house-api-qa
    on:
      repo: garage-it/SmartHouse-backend
  - provider: npm
    email: paur.link@gmail.com
    api_key:
      secure: W+ws50YqzEPoJiCzn/9kKoxgLW2CiOwZS5ECbmjpF7N75SkRC7jx84JVxJuHTaBV9UHZPS7YQoRfBJeH685PGBr234XPV4lIlGnp8r1NxacJsvQhq2QpHctX0/fTnAK/MFQ+9b04ezZUW9LosmQm3ljJWxRs3LFj2rUTqpdgj8cY4GNcA/BV2cbv7aF3NYbGH0FWJEoYl8lOSwRn6QBDaF6zol+Y7IKRxTTmEh4zo8xfj17YeH1xmub+OI7uU4TBvSlG1KffQvH7hy/9NcNyI0nTpxozf2zY6rtv/0qQUNv45/WKyEOoilCG5GqiasmQPgTur3KY4vfiAr/Ju5H/2r2cZA+eWseolxIFVlavyAkKWWSkmqfL6RaIUU52PR/j3XeW+QxhHdgMZ1FuSglBdxVVIhb9+ZA0Lr+KE2uaRC+Odaml+TniGpebWsTmnKAMbpT8MHIj3vGvgpf08xnQkUNr3WARJ6roy8/I29AMohUn3uZwrZWIPJO4eoKH+bwiMDVAqOvIFMIWmUKrE7Eqm9kwS8wFpvTaaWAuUsrWzo105rkUKccobwXqcrbaCp5IYUhwkwwAWhKnkaBa3TMhujrNCQw87xbUnGusf+b4FeIbqpxWEASov6M4e3dCHWDb5g+8f5x4IPMvzs1RYVGkql6YLaQ/FobDizO5p9Q/nJM=
    on:
      repo: garage-it/SmartHouse-backend

